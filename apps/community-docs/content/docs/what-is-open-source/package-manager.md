---
title: 패키지 매니저
description: 패키지 매니저에 대한 설명 작성
---

| 항목                   | npm                                                           | Yarn                                                                         | pnpm                                                                        |
| ---------------------- | ------------------------------------------------------------- | ---------------------------------------------------------------------------- | --------------------------------------------------------------------------- |
| **속도**               | 느림. 특히 대규모 프로젝트에서 설치 시간이 길어질 수 있음.    | Yarn 1은 npm보다 빠르며, Yarn 2+는 PnP 모드에서 더욱 향상된 성능을 제공함.   | 가장 빠름. 하드 링크와 캐시 활용으로 설치 속도가 매우 빠름.                 |
| **디스크 사용량**      | 중복된 패키지 저장으로 인해 디스크 사용량이 많음.             | 캐시를 활용하지만, 여전히 중복 저장이 발생할 수 있음.                        | 하드 링크를 사용하여 중복 저장을 방지, 디스크 사용량이 적음.                |
| **의존성 구조**        | 평탄화된 `node_modules` 구조로, 중복 의존성이 발생할 수 있음. | 평탄화된 구조를 유지함.                                                      | 중첩된 의존성 구조를 유지하여, 명시되지 않은 의존성 접근을 방지함.          |
| **워크스페이스**       | v7부터 기본 지원.                                             | v1부터 기본 지원.                                                            | v2부터 기본 지원. 대규모 모노레포에 적합함.                                 |
| **보안**               | 패키지 무결성 검증 기능이 제한적임.                           | 체크섬을 통해 패키지 무결성을 검증함.                                        | 체크섬 및 고유한 의존성 구조로 보안성이 높음.                               |
| **호환성**             | Node.js와 기본적으로 통합되어 있음.                           | 대부분의 npm 패키지와 호환되지만, PnP 모드에서는 일부 문제가 발생할 수 있음. | 대부분의 npm 패키지와 호환되지만, 일부 도구와의 호환성 이슈가 있을 수 있음. |
| **커뮤니티 및 생태계** | 가장 큰 사용자 기반과 생태계를 보유함.                        | 활발한 커뮤니티와 다양한 플러그인을 보유함.                                  | 빠르게 성장 중이나, 아직은 상대적으로 작은 생태계를 가짐.                   |

## Pnpm

### hard link

- 디스크 공간 효율적 사용
- 설치 속도를 향상
- 의존성 관리 엄격

### hard link 구조

- package를 전역 저장소 (`~/.pnpm-store`)에 한 번만 저장한 후, 각 프로젝트의 `node_modules` 디렉터리에 해당 패키지의 하드 링크를 생성.
- 하드 링크는 동일한 파일 시스템 내에서만 작동하며, 원본 파일과 동일한 inode를 공유하므로 실제로는 하나의 파일을 여러 위치에서 참조하는 방식

  ```jsx
  skipped:
    - /@emnapi/core/1.4.3
    - /@emnapi/runtime/1.4.3
    - /@emnapi/wasi-threads/1.0.2
    ...

  storeDir: /Users/chanhyung/Library/pnpm/store/v3
  virtualStoreDir: .pnpm
  ```

### pnpm이 hard link를 사용하는 이유

- 디스크 공간 절약 : 동일한 패키지가 여러 프로젝트에서 사용되더라도 실제 파일은 한 번만 저장되어 공간을 절약.
- Node.js 호환성 : Node.js는 하드 링크를 별도의 파일로 인식하므로, 모듈 해석 과정에서 문제가 발생하지 않는다. 반면 심볼릭 링크는 Node.js의 모듈 해석 방식과 충돌할 수 있어, 하드 링크가 더 안전.
- 의존성 분리 : 프로젝트마다 서로 다른 의존성 트리를 가질 수 있으므로, 하드 링크를 통해 각 프로젝트의 `node_modules` 구조를 독립적으로 구성할 수 있다.
